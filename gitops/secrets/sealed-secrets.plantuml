@startuml secrets/sealed-secrets.plantuml

!theme plain

actor GitHub as GH
rectangle "KubeSeal CLI\n(Developer Laptop)" as CLI
rectangle "K8s Secret" as K8S
rectangle "KubeSeal Controller\n(private/public key)" as CTRL
rectangle "Sealed Secret" as SS

GH --> SS : push/pull\nSealedSecret YAML
CLI --> K8S : create secret
CLI --> CTRL : request public key
CTRL --> CLI : public key

CLI --> SS : generate\nSealedSecret (encrypted)

SS --> CTRL : apply\nSealedSecret
CTRL --> K8S : decrypt using\nprivate key â†’ Secret

note right of CTRL
private key stays only\ninside the cluster
end note

@enduml
